<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>BrainAI Chat</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 2rem; }
      #chat { border: 1px solid #ddd; padding: 1rem; height: 60vh; overflow: auto; }
      .user { color: #111; }
      .ai { color: #007bff; }
      #input { width: 100%; padding: 0.5rem; }
    </style>
  </head>
  <body>
    <h1>BrainAI Chat (web)</h1>
    <div id="chat"></div>
    <div style="margin-top:1rem">
      <input id="input" placeholder="Say something..." />
      <button id="send">Send</button>
    </div>

    <script>
      const chat = document.getElementById('chat');
      const input = document.getElementById('input');
      const send = document.getElementById('send');

      function append(role, text){
        const d = document.createElement('div');
        d.className = role;
        d.textContent = (role==='user'? 'You: ' : 'AI: ') + text;
        chat.appendChild(d);
        chat.scrollTop = chat.scrollHeight;
      }

      send.onclick = async () => {
        const val = input.value.trim();
        if(!val) return;
        append('user', val);
        input.value='';
        const res = await fetch('/api/chat', {
          method: 'POST', headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({message: val, dry_run: true})
        });
        const j = await res.json();
        append('ai', j.reply || '');
      };
    </script>
  </body>
</html>
